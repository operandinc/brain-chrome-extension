(()=>{var e={98:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,s="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function p(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&s&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e,t,n,r=m(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=h(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,s=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),w.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function T(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(s))}})),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];v.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,n){return new Promise((function(r,i){var o=new b(e,n);if(o.signal&&o.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var s=n.join(":").trim();t.append(r,s)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var s="response"in a?a.response:a.responseText;r(new v(s,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&s&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=d,e.Request=b,e.Response=v),t.Headers=d,t.Request=b,t.Response=v,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(()=>{"use strict";var e,t,r,s=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function o(e){return s(this,void 0,void 0,(function(){var t,n,r,s,o,a;return i(this,(function(i){for(t=["apiKey","automaticIndexingDestination","manualIndexingMostRecentDestination"],n=0,r=["searchInjectionEnabled","newTabFeedEnabled","automaticIndexingEnabled"];n<r.length;n++)if(void 0!==e[a=r[n]]&&"boolean"!=typeof e[a])return[2,!1];for(s=0,o=t;s<o.length;s++)if(void 0!==e[a=o[s]]&&"string"!=typeof e[a])return[2,!1];return[2,!0]}))}))}function a(){return s(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,chrome.storage.sync.get("settings")];case 1:return(e=n.sent())&&(t=e.settings)?[4,o(t)]:[2,null];case 2:return n.sent()?[2,t]:[2,null]}}))}))}function u(e){return s(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,a()];case 1:return(t=n.sent())?[2,t[e]]:[2,null]}}))}))}function c(){return s(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,u("apiKey")];case 1:return(e=t.sent())?"string"!=typeof e||0===e.length?[2,null]:[2,e]:[2,null]}}))}))}function l(e){return s(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o(e)];case 1:return t.sent()?[4,chrome.storage.sync.set({settings:e})]:[3,3];case 2:return t.sent(),[2,!0];case 3:return[2,!1]}}))}))}function f(){return s(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,chrome.storage.sync.get("rules")];case 1:return(e=n.sent())?(t=e.rules,Array.isArray(t)?[2,t]:[2,null]):[2,null]}}))}))}function d(e){switch(e){case 400:return r.InvalidArgument;case 401:return r.Unauthenticated;case 403:return r.PermissionDenied;case 404:return r.Unimplemented;case 408:return r.DeadlineExceeded;case 409:return r.Aborted;case 412:return r.FailedPrecondition;case 413:case 431:return r.ResourceExhausted;case 415:return r.Internal;case 429:case 502:case 503:case 504:return r.Unavailable;default:return r.Unknown}}function m(e){const t=r[e];return"string"!=typeof t?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,(e=>"_"+e.toLowerCase()))}let h;!function(e){e[e.Unary=0]="Unary",e[e.ServerStreaming=1]="ServerStreaming",e[e.ClientStreaming=2]="ClientStreaming",e[e.BiDiStreaming=3]="BiDiStreaming"}(e||(e={})),function(e){e[e.NoSideEffects=1]="NoSideEffects",e[e.Idempotent=2]="Idempotent"}(t||(t={})),function(e){e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(r||(r={}));let p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),y=[];for(let e=0;e<p.length;e++)y[p[e].charCodeAt(0)]=e;y["-".charCodeAt(0)]=p.indexOf("+"),y["_".charCodeAt(0)]=p.indexOf("/");const g={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),s=0,i=0,o=0;for(let t=0;t<e.length;t++){if(n=y[e.charCodeAt(t)],void 0===n)switch(e[t]){case"=":i=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=n,i=1;break;case 1:r[s++]=o<<2|(48&n)>>4,o=n,i=2;break;case 2:r[s++]=(15&o)<<4|(60&n)>>2,o=n,i=3;break;case 3:r[s++]=(3&o)<<6|n,i=0}}if(1==i)throw Error("invalid base64 string.");return r.subarray(0,s)},enc(e){let t,n="",r=0,s=0;for(let i=0;i<e.length;i++)switch(t=e[i],r){case 0:n+=p[t>>2],s=(3&t)<<4,r=1;break;case 1:n+=p[s|t>>4],s=(15&t)<<2,r=2;break;case 2:n+=p[s|t>>6],n+=p[63&t],r=0}return r&&(n+=p[s],n+="=",1==r&&(n+="=")),n}};function w(e,t){if(!e)throw new Error(t)}function b(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function T(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function v(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}const k=Symbol("@bufbuild/protobuf/enum-type");function E(e){const t=e[k];return w(t,"missing enum type on enum object"),t}function S(e,t,n,r){e[k]=N(t,n.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))),r)}function N(e,t,n){const r=Object.create(null),s=Object.create(null),i=[];for(const e of t){const t=J(e);i.push(t),r[e.name]=t,s[e.no]=t}return{typeName:e,values:i,findName:e=>r[e],findNumber:e=>s[e]}}function I(e,t,n){const r={};for(const e of t){const t=J(e);r[t.localName]=t.no,r[t.no]=t.localName}return S(r,e,t,n),r}function J(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class O{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType().runtime.bin,r=n.makeReadOptions(t);return n.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,t){const n=this.getType(),r=n.runtime.json,s=r.makeReadOptions(t);return r.readMessage(n,e,s,this),this}fromJsonString(e,t){return this.fromJson(JSON.parse(e),t)}toBinary(e){const t=this.getType().runtime.bin,n=t.makeWriteOptions(e),r=n.writerFactory();return t.writeMessage(this,r,n),r.finish()}toJson(e){const t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null==e?void 0:e.prettySpaces)&&void 0!==t?t:0)}getType(){return Object.getPrototypeOf(this).constructor}}var B;function F(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,0==(128&r))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,0==(128&r))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function U(e,t,n){for(let r=0;r<28;r+=7){const s=e>>>r,i=!(s>>>7==0&&0==t),o=255&(i?128|s:s);if(n.push(o),!i)return}const r=e>>>28&15|(7&t)<<4,s=!(t>>3==0);if(n.push(255&(s?128|r:r)),s){for(let e=3;e<31;e+=7){const r=t>>>e,s=!(r>>>7==0),i=255&(s?128|r:r);if(n.push(i),!s)return}n.push(t>>>31&1)}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(B||(B={}));const x=4294967296;function A(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let r=0,s=0;function i(t,i){const o=Number(e.slice(t,i));s*=n,r=r*n+o,r>=x&&(s+=r/x|0,r%=x)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),t?L(r,s):P(r,s)}function D(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(x*t+e);const n=16777215&(e>>>24|t<<8),r=t>>16&65535;let s=(16777215&e)+6777216*n+6710656*r,i=n+8147497*r,o=2*r;const a=1e7;return s>=a&&(i+=Math.floor(s/a),s%=a),i>=a&&(o+=Math.floor(i/a),i%=a),o.toString()+j(i)+j(s)}function P(e,t){return{lo:0|e,hi:0|t}}function L(e,t){return t=~t,e?e=1+~e:t+=1,P(e,t)}const j=e=>{const t=String(e);return"0000000".slice(t.length)+t};function _(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function q(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}const R=function(){const e=new DataView(new ArrayBuffer(8));if(void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw new Error(`int64 invalid: ${e}`);return r},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>s||t<r)throw new Error(`uint64 invalid: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}const t=e=>w(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),n=e=>w(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),t(e),A(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),n(e),A(e)),dec:(e,t)=>function(e,t){let n=P(e,t);const r=2147483648&n.hi;r&&(n=L(n.lo,n.hi));const s=D(n.lo,n.hi);return r?"-"+s:s}(e,t),uDec:(e,t)=>D(e,t)}}();var $;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}($||($={}));class C{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(T(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return b(e),_(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){v(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){T(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){b(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return b(e),_(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=R.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=R.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=R.enc(e);return U(t.lo,t.hi,this.buf),this}sint64(e){let t=R.enc(e),n=t.hi>>31;return U(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=R.uEnc(e);return U(t.lo,t.hi,this.buf),this}}class M{constructor(e,t){this.varint64=F,this.uint32=q,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case $.Varint:for(;128&this.buf[this.pos++];);break;case $.Bit64:this.pos+=4;case $.Bit32:this.pos+=4;break;case $.LengthDelimited:let t=this.uint32();this.pos+=t;break;case $.StartGroup:let n;for(;(n=this.tag()[1])!==$.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return R.dec(...this.varint64())}uint64(){return R.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,R.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return R.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return R.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function V(e,t){if(t instanceof e)return t;if(e.fieldWrapper)return e.fieldWrapper.wrapField(t);throw new Error(`cannot unwrap field value, ${e.typeName} does not define a field wrapper`)}function X(e,t){return e.fieldWrapper?e.fieldWrapper.unwrapField(t):t}B.DOUBLE,B.FLOAT,B.INT64,B.UINT64,B.INT32,B.UINT32,B.BOOL,B.STRING,B.BYTES;function G(e,t,n){if(t===n)return!0;if(e==B.BYTES){if(!(t instanceof Uint8Array&&n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case B.UINT64:case B.FIXED64:case B.INT64:case B.SFIXED64:case B.SINT64:return t==n}return!1}function Y(e){switch(e){case B.BOOL:return!1;case B.UINT64:case B.FIXED64:case B.INT64:case B.SFIXED64:case B.SINT64:return R.zero;case B.DOUBLE:case B.FLOAT:return 0;case B.BYTES:return new Uint8Array(0);case B.STRING:return"";default:return 0}}function H(e,t){const n=void 0===t;let r=$.Varint,s=0===t;switch(e){case B.STRING:s=n||!t.length,r=$.LengthDelimited;break;case B.BOOL:s=!1===t;break;case B.DOUBLE:r=$.Bit64;break;case B.FLOAT:r=$.Bit32;break;case B.INT64:case B.UINT64:s=n||0==t;break;case B.FIXED64:s=n||0==t,r=$.Bit64;break;case B.BYTES:s=n||!t.byteLength,r=$.LengthDelimited;break;case B.FIXED32:case B.SFIXED32:r=$.Bit32;break;case B.SFIXED64:s=n||0==t,r=$.Bit64;break;case B.SINT64:s=n||0==t}return[r,B[e].toLowerCase(),n||s]}const W=Symbol("@bufbuild/protobuf/unknown-fields"),Z={readUnknownFields:!0,readerFactory:e=>new M(e)},K={writeUnknownFields:!0,writerFactory:()=>new C};function z(e){return e?Object.assign(Object.assign({},Z),e):Z}function Q(e){return e?Object.assign(Object.assign({},K),e):K}function ee(e,t,n){const r=t.uint32(),s=t.pos+r;let i,o;for(;t.pos<s;){let[r]=t.tag();switch(r){case 1:i=te(t,e.K);break;case 2:switch(e.V.kind){case"scalar":o=te(t,e.V.T);break;case"enum":o=t.int32();break;case"message":o=e.V.T.fromBinary(t.bytes(),n)}}}if(void 0===i){let t=Y(e.K);i=e.K==B.BOOL?t.toString():t}if("string"!=typeof i&&"number"!=typeof i&&(i=i.toString()),void 0===o)switch(e.V.kind){case"scalar":o=Y(e.V.T);break;case"enum":o=0;break;case"message":o=new e.V.T}return[i,o]}function te(e,t){let[,n]=H(t);return e[n]()}function ne(e,t,n,r,s){e.tag(n.no,$.LengthDelimited),e.fork();let i=r;switch(n.K){case B.INT32:case B.FIXED32:case B.UINT32:case B.SFIXED32:case B.SINT32:i=Number.parseInt(r);break;case B.BOOL:w("true"==r||"false"==r),i="true"==r}switch(se(e,n.K,1,i,!0),n.V.kind){case"scalar":se(e,n.V.T,2,s,!0);break;case"enum":se(e,B.INT32,2,s,!0);break;case"message":re(e,t,n.V.T,2,s)}e.join()}function re(e,t,n,r,s){if(void 0!==s){const i=V(n,s);e.tag(r,$.LengthDelimited).bytes(i.toBinary(t))}}function se(e,t,n,r,s){let[i,o,a]=H(t,r);a&&!s||e.tag(n,i)[o](r)}function ie(e,t,n,r){if(!r.length)return;e.tag(n,$.LengthDelimited).fork();let[,s]=H(t);for(let t=0;t<r.length;t++)e[s](r[t]);e.join()}const oe={ignoreUnknownFields:!1},ae={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function ue(e){return e?Object.assign(Object.assign({},oe),e):oe}function ce(e){return e?Object.assign(Object.assign({},ae),e):ae}function le(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return e.toString()}}function fe(e,t){switch(e){case B.DOUBLE:case B.FLOAT:if(null===t)return 0;if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const n=Number(t);if(Number.isNaN(n))break;if(!Number.isFinite(n))break;return e==B.FLOAT&&v(n),n;case B.INT32:case B.FIXED32:case B.SFIXED32:case B.SINT32:case B.UINT32:if(null===t)return 0;let r;if("number"==typeof t?r=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(r=Number(t)),void 0===r)break;return e==B.UINT32?T(r):b(r),r;case B.INT64:case B.SFIXED64:case B.SINT64:if(null===t)return R.zero;if("number"!=typeof t&&"string"!=typeof t)break;return R.parse(t);case B.FIXED64:case B.UINT64:if(null===t)return R.zero;if("number"!=typeof t&&"string"!=typeof t)break;return R.uParse(t);case B.BOOL:if(null===t)return!1;if("boolean"!=typeof t)break;return t;case B.STRING:if(null===t)return"";if("string"!=typeof t)break;try{encodeURIComponent(t)}catch(e){throw new Error("invalid UTF8")}return t;case B.BYTES:if(null===t||""===t)return new Uint8Array(0);if("string"!=typeof t)break;return g.dec(t)}throw new Error}function de(e,t,n){if(null===t)return 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=e.findName(t);if(r||n)return null==r?void 0:r.no}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${le(t)}`)}function me(e,t,n,r){var s;if(void 0===t)return t;if(0===t&&!n)return;if(r)return t;if("google.protobuf.NullValue"==e.typeName)return null;const i=e.findNumber(t);return null!==(s=null==i?void 0:i.name)&&void 0!==s?s:t}function he(e,t,n){if(void 0!==t)switch(e){case B.INT32:case B.SFIXED32:case B.SINT32:case B.FIXED32:case B.UINT32:return w("number"==typeof t),0!=t||n?t:void 0;case B.FLOAT:case B.DOUBLE:return w("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":0!==t||n?t:void 0;case B.STRING:return w("string"==typeof t),t.length>0||n?t:void 0;case B.BOOL:return w("boolean"==typeof t),t||n?t:void 0;case B.UINT64:case B.FIXED64:case B.INT64:case B.SFIXED64:case B.SINT64:return w("bigint"==typeof t||"string"==typeof t||"number"==typeof t),n||0!=t?t.toString(10):void 0;case B.BYTES:return w(t instanceof Uint8Array),n||t.byteLength>0?g.enc(t):void 0}}function pe(e,t){if(void 0===t)return t;switch(e.kind){case"enum":return t;case"scalar":if(e.T===B.BYTES){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t;case"message":return e.T.fieldWrapper?e.T.fieldWrapper.unwrapField(e.T.fieldWrapper.wrapField(t).clone()):t.clone()}}class ye{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function ge(e,t){let n=Te(e);return t||(ve[n]||ke[n])&&(n+="$"),n}function we(e){return ge(e,!1)}const be=Te;function Te(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let s=e.charAt(r);switch(s){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(s),t=!1;break;default:t&&(t=!1,s=s.toUpperCase()),n.push(s)}}return n.join("")}const ve={constructor:!0,toString:!0,toJSON:!0,valueOf:!0},ke={getType:!0,clone:!0,equals:!0,fromBinary:!0,fromJson:!0,fromJsonString:!0,toBinary:!0,toJson:!0,toJsonString:!0,toObject:!0};class Ee{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=we(e)}addField(e){w(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const Se=(Ne="proto3",Ie=function(e){const t=e(me,he);return{makeReadOptions:ue,makeWriteOptions:ce,readMessage(e,t,n,r){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode message ${e.typeName} from JSON: ${this.debug(t)}`);r=null!=r?r:new e;const s={};for(const[i,o]of Object.entries(t)){const t=e.fields.findJsonName(i);if(!t){if(!n.ignoreUnknownFields)throw new Error(`cannot decode message ${e.typeName} from JSON: key "${i}" is unknown`);continue}let a=t.localName,u=r;if(t.oneof){if(null===o&&"scalar"==t.kind)continue;const n=s[t.oneof.localName];if(n)throw new Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${t.oneof.name}" present: "${n}", "${i}"`);s[t.oneof.localName]=i,u=u[t.oneof.localName]={case:a},a="value"}if(t.repeated){if(null===o)continue;if(!Array.isArray(o))throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`);const r=u[a];for(const s of o){if(null===s)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(s)}`);let i;switch(t.kind){case"message":i=t.T.fromJson(s,n);break;case"enum":if(i=de(t.T,s,n.ignoreUnknownFields),void 0===i)continue;break;case"scalar":try{i=fe(t.T,s)}catch(n){let r=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(s)}`;throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}}r.push(i)}}else if("map"==t.kind){if(null===o)continue;if(Array.isArray(o)||"object"!=typeof o)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`);const r=u[a];for(const[s,i]of Object.entries(o)){if(null===i)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: map value null`);let a;switch(t.V.kind){case"message":a=t.V.T.fromJson(i,n);break;case"enum":if(a=de(t.V.T,i,n.ignoreUnknownFields),void 0===a)continue;break;case"scalar":try{a=fe(t.V.T,i)}catch(n){let r=`cannot decode map value for field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`;throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}}try{r[fe(t.K,t.K==B.BOOL?"true"==s||"false"!=s&&s:s).toString()]=a}catch(n){let r=`cannot decode map key for field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`;throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}}}else switch(t.kind){case"message":const r=t.T;if(null===o&&"google.protobuf.Value"!=r.typeName){if(t.oneof)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: null is invalid for oneof field "${i}"`);continue}const s=void 0===u[a]?new r:V(r,u[a]);u[a]=X(r,s.fromJson(o,n));break;case"enum":const c=de(t.T,o,n.ignoreUnknownFields);void 0!==c&&(u[a]=c);break;case"scalar":try{u[a]=fe(t.T,o)}catch(n){let r=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`;throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}}}return r},writeMessage(e,n){const r=e.getType(),s={};let i;try{for(const o of r.fields.byMember()){let r;if("oneof"==o.kind){const s=e[o.localName];if(void 0===s.value)continue;if(i=o.findField(s.case),!i)throw"oneof case not found: "+s.case;r=t(i,s.value,n)}else i=o,r=t(i,e[i.localName],n);void 0!==r&&(s[n.useProtoFieldName?i.name:i.jsonName]=r)}}catch(e){const t=i?`cannot encode field ${r.typeName}.${i.name} to JSON`:`cannot encode message ${r.typeName} to JSON`,n=e instanceof Error?e.message:String(e);throw new Error(t+(n.length>0?`: ${n}`:""))}return s},readScalar:fe,writeScalar:he,debug:le}}(((e,t)=>function(n,r,s){if("map"==n.kind){const i={};switch(n.V.kind){case"scalar":for(const[e,s]of Object.entries(r)){const r=t(n.V.T,s,!0);w(void 0!==r),i[e.toString()]=r}break;case"message":for(const[e,t]of Object.entries(r))i[e.toString()]=t.toJson(s);break;case"enum":const o=n.V.T;for(const[t,n]of Object.entries(r)){w(void 0===n||"number"==typeof n);const r=e(o,n,!0,s.enumAsInteger);w(void 0!==r),i[t.toString()]=r}}return s.emitDefaultValues||Object.keys(i).length>0?i:void 0}if(n.repeated){const i=[];switch(n.kind){case"scalar":for(let e=0;e<r.length;e++)i.push(t(n.T,r[e],!0));break;case"enum":for(let t=0;t<r.length;t++)i.push(e(n.T,r[t],!0,s.enumAsInteger));break;case"message":for(let e=0;e<r.length;e++)i.push(V(n.T,r[e]).toJson(s))}return s.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return t(n.T,r,!!n.oneof||n.opt||s.emitDefaultValues);case"enum":return e(n.T,r,!!n.oneof||n.opt||s.emitDefaultValues,s.enumAsInteger);case"message":return void 0!==r?V(n.T,r).toJson(s):void 0}})),Je=Object.assign(Object.assign({},{makeReadOptions:z,makeWriteOptions:Q,listUnknownFields(e){var t;return null!==(t=e[W])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[W]},writeUnknownFields(e,t){const n=e[W];if(n)for(const e of n)t.tag(e.no,e.wireType).raw(e.data)},onUnknownField(e,t,n,r){const s=e;Array.isArray(s[W])||(s[W]=[]),s[W].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r){const s=e.getType(),i=void 0===n?t.len:t.pos+n;for(;t.pos<i;){const[n,i]=t.tag(),o=s.fields.find(n);if(!o){const s=t.skip(i);r.readUnknownFields&&this.onUnknownField(e,n,i,s);continue}let a=e,u=o.repeated,c=o.localName;switch(o.oneof&&(a=a[o.oneof.localName],a.case!=c&&delete a.value,a.case=c,c="value"),o.kind){case"scalar":case"enum":const e="enum"==o.kind?B.INT32:o.T;if(u){let n=a[c];if(i==$.LengthDelimited&&e!=B.STRING&&e!=B.BYTES){let r=t.uint32()+t.pos;for(;t.pos<r;)n.push(te(t,e))}else n.push(te(t,e))}else a[c]=te(t,e);break;case"message":const n=o.T;u?a[c].push(n.fromBinary(t.bytes(),r)):a[c]instanceof n?a[c].fromBinary(t.bytes(),r):a[c]=X(n,n.fromBinary(t.bytes(),r));break;case"map":let[s,l]=ee(o,t,r);a[c][s]=l}}}}),{writeMessage(e,t,n){const r=e.getType();for(const s of r.fields.byNumber()){let r,i=s.repeated,o=s.localName;if(s.oneof){const t=e[s.oneof.localName];if(t.case!==o)continue;r=t.value}else r=e[o];switch(s.kind){case"scalar":case"enum":let e="enum"==s.kind?B.INT32:s.T;if(i)if(s.packed)ie(t,e,s.no,r);else for(const n of r)se(t,e,s.no,n,!0);else void 0!==r&&se(t,e,s.no,r,!!s.oneof||s.opt);break;case"message":if(i)for(const e of r)re(t,n,s.T,s.no,e);else re(t,n,s.T,s.no,r);break;case"map":for(const[e,i]of Object.entries(r))ne(t,n,s,e,i)}}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t}}),Oe=Object.assign(Object.assign({},{setEnumType:S,initPartial(e,t){if(void 0===e)return;const n=t.getType();for(const r of n.fields.byMember()){const n=r.localName,s=t,i=e;if(void 0!==i[n])switch(r.kind){case"oneof":const e=i[n].case;if(void 0===e)continue;const t=r.findField(e);let o=i[n].value;!t||"message"!=t.kind||o instanceof t.T||(o=new t.T(o)),s[n]={case:e,value:o};break;case"scalar":case"enum":s[n]=i[n];break;case"map":switch(r.V.kind){case"scalar":case"enum":Object.assign(s[n],i[n]);break;case"message":const e=r.V.T;for(const t of Object.keys(i[n])){let r=i[n][t];e.fieldWrapper||(r=new e(r)),s[n][t]=r}}break;case"message":const a=r.T;if(r.repeated)s[n]=i[n].map((e=>e instanceof a?e:new a(e)));else if(void 0!==i[n]){const e=i[n];a.fieldWrapper?s[n]=e:s[n]=e instanceof a?e:new a(e)}}}},equals:(e,t,n)=>t===n||!(!t||!n)&&e.fields.byMember().every((e=>{const r=t[e.localName],s=n[e.localName];if(e.repeated){if(r.length!==s.length)return!1;switch(e.kind){case"message":return r.every(((t,n)=>e.T.equals(t,s[n])));case"scalar":return r.every(((t,n)=>G(e.T,t,s[n])));case"enum":return r.every(((e,t)=>G(B.INT32,e,s[t])))}throw new Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":return e.T.equals(r,s);case"enum":return G(B.INT32,r,s);case"scalar":return G(e.T,r,s);case"oneof":if(r.case!==s.case)return!1;const t=r.case,n=e.findField(t);if(void 0===n)return!0;switch(n.kind){case"message":return n.T.equals(r[t],s[t]);case"enum":return G(B.INT32,r,s);case"scalar":return G(n.T,r,s)}throw new Error(`oneof cannot contain ${n.kind}`);case"map":const i=Object.keys(r);if(i.some((e=>void 0===s[e])))return!1;switch(e.V.kind){case"message":const t=e.V.T;return i.every((e=>t.equals(r[e],s[e])));case"enum":return i.every((e=>G(B.INT32,r[e],s[e])));case"scalar":const n=e.V.T;return i.every((e=>G(n,r[e],s[e])))}}})),clone(e){const t=e.getType(),n=new t,r=n;for(const n of t.fields.byMember()){const t=e[n.localName];let s;if(n.repeated)s=t.map((e=>pe(n,e)));else if("map"==n.kind){s=r[n.localName];for(const[e,r]of Object.entries(t))s[e]=pe(n.V,r)}else if("oneof"==n.kind){const e=n.findField(t.case);s=e?{case:t.case,value:pe(e,t.value)}:{case:void 0}}else s=pe(n,t);r[n.localName]=s}return n}}),{newFieldList:e=>new ye(e,Be),initFields(e){for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated)r[n]=[];else switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Y(t.T)}}}}),{syntax:Ne,json:Ie,bin:Je,util:Oe,makeMessageType(e,t,n){return function(e,t,n,r){var s;const i=null!==(s=null==r?void 0:r.localName)&&void 0!==s?s:t.substring(t.lastIndexOf(".")+1),o={[i]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[i];return Object.setPrototypeOf(o.prototype,new O),Object.assign(o,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:(e,t)=>(new o).fromBinary(e,t),fromJson:(e,t)=>(new o).fromJson(e,t),fromJsonString:(e,t)=>(new o).fromJsonString(e,t),equals:(t,n)=>e.util.equals(o,t,n)}),o}(this,e,t,n)},makeEnum:I,makeEnumType:N,getEnumType:E});var Ne,Ie,Je,Oe;function Be(e){var t,n,r;const s=[];let i;for(const o of"function"==typeof e?e():e){const e=o;if(e.localName=ge(o.name,void 0!==o.oneof),e.jsonName=null!==(t=o.jsonName)&&void 0!==t?t:be(o.name),e.repeated=null!==(n=o.repeated)&&void 0!==n&&n,e.packed=null!==(r=o.packed)&&void 0!==r?r:"enum"==o.kind||"scalar"==o.kind&&o.T!=B.BYTES&&o.T!=B.STRING,void 0!==o.oneof){const t="string"==typeof o.oneof?o.oneof:o.oneof.name;i&&i.name==t||(i=new Ee(t)),e.oneof=i,i.addField(e)}s.push(e)}return s}class Fe extends Error{constructor(e,t=r.Unknown,n,s){super(function(e,t){return e.length?`[${m(t)}] ${e}`:`[${m(t)}]`}(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(null!=s?s:{}),this.details=[]}}function Ue(e,t){if("object"!=typeof e||null==e||Array.isArray(e)||!("code"in e)||"string"!=typeof e.code)throw Ae(e);const n=function(e){if(!h){h={};for(const e of Object.values(r))"string"!=typeof e&&(h[m(e)]=e)}return h[e]}(e.code);if(!n)throw Ae(e.code,".code");const s=e.message;if(null!=s&&"string"!=typeof s)throw Ae(e.code,".message");const i=new Fe(null!=s?s:"",n,void 0,t);if("details"in e&&Array.isArray(e.details))for(const t of e.details){if(null===t||"object"!=typeof t||Array.isArray(t)||"string"!=typeof t.type||"string"!=typeof t.value)throw Ae(t,".details");try{i.details.push({typeUrl:"type.googleapis.com/"+t.type,value:g.dec(t.value)})}catch(e){throw Ae(e,".details",!1)}}return i}function xe(e,t=r.Unknown){return e instanceof Fe?e:e instanceof Error?"AbortError"==e.name?new Fe(e.message,r.Canceled):new Fe(e.message):new Fe(String(e),t)}function Ae(e,t,n){let s;return null==n||n?s=Se.json.debug(e):(t="",s=e instanceof Error?e.message:String(e)),new Fe(`cannot decode ConnectError${null!=t?t:""} from JSON: ${s}`,r.Internal)}function De(e,t){return t.concat().reverse().reduce(((e,t)=>t(e)),e)}function Pe(e,t,n){const r=e.data.length+5,s=new Uint8Array(t,n,r);s[0]=e.flags;for(let t=e.data.length,n=4;n>0;n--)s[n]=t%256,t>>>=8;return s.set(e.data,5),r}function Le(...e){const t=new Headers;for(const n of e)n.forEach(((e,n)=>{t.append(n,e)}));return t}function je(e){var t;!function(){try{new Headers}catch(e){throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}();const n=null!==(t=e.useBinaryFormat)&&void 0!==t&&t;return{async unary(t,s,i,o,a,u){var c,l,f,m;try{return await(l={stream:!1,service:t,method:s,url:`${e.baseUrl.replace(/\/$/,"")}/${t.typeName}/${s.name}`,init:{method:"POST",credentials:null!==(c=e.credentials)&&void 0!==c?c:"same-origin",redirect:"error",mode:"cors"},header:qe(a,o,s.kind,n),message:u instanceof s.I?u:new s.I(u),signal:null!=i?i:(new AbortController).signal},f=async r=>{var i;const o=await fetch(r.url,Object.assign(Object.assign({},r.init),{headers:r.header,signal:r.signal,body:_e(r.message,s.kind,n,e.jsonOptions)})),a=null!==(i=o.headers.get("Content-Type"))&&void 0!==i?i:"";if(200!=o.status){if("application/json"==a)throw Ue(await o.json(),Le(...$e(o.headers)));throw new Fe(`HTTP ${o.status} ${o.statusText}`,d(o.status))}Re(a,!1,n);const[u,c]=$e(o.headers);return{stream:!1,service:t,method:s,header:u,message:n?s.O.fromBinary(new Uint8Array(await o.arrayBuffer()),e.binaryOptions):s.O.fromJson(await o.json(),e.jsonOptions),trailer:c}},m=e.interceptors,m&&(f=De(f,m)),f(l))}catch(e){throw xe(e,r.Internal)}},async serverStream(t,s,i,o,a,u){var c,l,f,m;try{return await(l={stream:!1,service:t,method:s,url:`${e.baseUrl.replace(/\/$/,"")}/${t.typeName}/${s.name}`,init:{method:"POST",credentials:null!==(c=e.credentials)&&void 0!==c?c:"same-origin",redirect:"error",mode:"cors"},header:qe(a,o,s.kind,n),message:u instanceof s.I?u:new s.I(u),signal:null!=i?i:(new AbortController).signal},f=async i=>{var o;const a=await fetch(i.url,Object.assign(Object.assign({},i.init),{headers:i.header,signal:i.signal,body:_e(i.message,s.kind,n,e.jsonOptions)})),u=null!==(o=a.headers.get("Content-Type"))&&void 0!==o?o:"";if(200!=a.status){if("application/json"==u)throw Ue(await a.json(),Le(...$e(a.headers)));throw new Fe(`HTTP ${a.status} ${a.statusText}`,d(a.status))}if(Re(u,!0,n),null===a.body)throw"missing response body";const c=function(e){let t,n=new Uint8Array(0);function s(e){const t=new Uint8Array(n.length+e.length);t.set(n),t.set(e,n.length),n=t}return new ReadableStream({start(){t=e.getReader()},async pull(e){let i;for(;;){if(void 0===i&&n.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+n[t];i={flags:n[0],length:e}}if(void 0!==i&&n.byteLength>=i.length+5)break;const e=await t.read();if(e.done)break;s(e.value)}if(void 0===i)return 0==n.byteLength?void e.close():void e.error(new Fe("premature end of stream",r.DataLoss));const o=n.subarray(5,5+i.length);n=n.subarray(5+i.length),e.enqueue({flags:i.flags,data:o})}})}(a.body).getReader();let l=!1;return{stream:!0,service:t,method:s,header:a.headers,trailer:new Headers,async read(){const t=await c.read();if(t.done){if(!l)throw new Fe("missing EndStreamResponse");return{done:!0,value:void 0}}if((t.value.flags&Ce)===Ce){l=!0;const e=function(e){let t;try{t=JSON.parse((new TextDecoder).decode(e))}catch(e){throw Ae(e,"",!1)}if("object"!=typeof t||null==t||Array.isArray(t))throw Ae(t);const n=new Headers;if("metadata"in t){if("object"!=typeof t.metadata||null==t.metadata||Array.isArray(t.metadata))throw Ae(t,".metadata");for(const[e,r]of Object.entries(t.metadata)){if(!Array.isArray(r)||r.some((e=>"string"!=typeof e)))throw Ae(r,`.metadata["${e}"]`);for(const t of r)n.append(e,t)}}const r="error"in t?Ue(t.error,n):void 0;return{metadata:n,error:r}}(t.value.data);if(e.metadata.forEach(((e,t)=>this.trailer.append(t,e))),e.error)throw e.error;return{done:!0,value:void 0}}return{done:!1,value:n?s.O.fromBinary(t.value.data,e.binaryOptions):s.O.fromJsonString((new TextDecoder).decode(t.value.data),e.jsonOptions)}}}},m=e.interceptors,m&&(f=De(f,m)),f(l))}catch(e){throw xe(e,r.Internal)}}}}function _e(t,n,r,s){const i=r?t.toBinary():t.toJsonString(s);if(n==e.Unary)return i;return function(...e){const t=new ArrayBuffer(e.reduce(((e,t)=>e+t.data.length+5),0));let n=0;for(const r of e)n+=Pe(r,t,n);return new Uint8Array(t)}({data:"string"==typeof i?(new TextEncoder).encode(i):i,flags:0},{data:new Uint8Array(0),flags:Ce})}function qe(t,n,r,s){const i=new Headers(null!=t?t:{});let o="application/";return r!=e.Unary&&(o+="connect+"),o+=s?"proto":"json",i.set("Content-Type",o),void 0!==n&&i.set("Connect-Timeout-Ms",`${n}`),i}function Re(e,t,n){const s=null==e?void 0:e.match(/^application\/(connect\+)?(json|proto)$/),i=s&&"proto"==s[2];if(!s||t!==!!s[1]||n!==i)throw new Fe(`unexpected response content type ${String(e)}`,r.Internal)}function $e(e){const t=new Headers,n=new Headers;return e.forEach(((e,r)=>{r.toLowerCase().startsWith("trailer-")?n.set(r.substring(8),e):t.set(r,e)})),[t,n]}const Ce=2;function Me(t,n){return function(e,t){const n={};for(const[r,s]of Object.entries(e.methods)){const i=t(Object.assign(Object.assign({},s),{localName:r,service:e}));null!=i&&(n[r]=i)}return n}(t,(r=>{switch(r.kind){case e.Unary:return function(e,t,n){return async function(r,s){var i,o;const a=await e.unary(t,n,null==s?void 0:s.signal,null==s?void 0:s.timeoutMs,null==s?void 0:s.headers,r);return null===(i=null==s?void 0:s.onHeader)||void 0===i||i.call(s,a.header),null===(o=null==s?void 0:s.onTrailer)||void 0===o||o.call(s,a.trailer),a.message}}(n,t,r);case e.ServerStreaming:return function(e,t,n){return function(r,s){let i;return{[Symbol.asyncIterator]:()=>({async next(){var o,a;i||(i=await e.serverStream(t,n,null==s?void 0:s.signal,null==s?void 0:s.timeoutMs,null==s?void 0:s.headers,r),null===(o=null==s?void 0:s.onHeader)||void 0===o||o.call(s,i.header));const u=await i.read();return u.done?(null===(a=null==s?void 0:s.onTrailer)||void 0===a||a.call(s,i.trailer),{done:!0,value:void 0}):{done:!1,value:u.value}}})}}}(n,t,r);default:return null}}))}var Ve=n(98);function Xe(e){return t=>async n=>{if(e)for(const[t,r]of Object.entries(e))!n.header.has(t)&&r&&n.header.set(t,r);return await t(n)}}function Ge(e,t,n,r,s){const i=n||"https://engine.operand.ai",o=Object.assign(Object.assign({},r),{Authorization:t}),a=function(){try{return new Headers,!0}catch(e){return!1}}()&&!s?je({baseUrl:i,interceptors:[Xe(o)]}):function(e,t){return{async unary(n,r,s,i,o,a){const u=`${e}/${n.typeName}/${r.name}`,c=await Ve(u,{method:"POST",headers:Object.assign(Object.assign({},t),{"Content-Type":"application/json"}),body:Ye(a instanceof r.I?a:new r.I(a))});if(!c.ok){const e=await c.text(),t=`Request failed with code ${c.status}, status ${c.statusText}: ${e}`;return console.warn(t),Promise.reject(new Error(t))}return{message:r.O.fromJson(await c.json(),{ignoreUnknownFields:!0})}},serverStream:async(e,t,n,r,s,i)=>Promise.reject(new Error("Not implemented"))}}(i,o);return Me(e,a)}function Ye(e){return e.toJsonString()}class He extends O{constructor(e){super(),this.seconds=R.zero,this.nanos=0,Se.util.initPartial(e,this)}fromJson(e,t){if("string"!=typeof e)throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${Se.json.debug(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=R.parse(r/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const e=(this.nanos+1e9).toString().substring(1);n="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return He.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new He({seconds:R.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return(new He).fromBinary(e,t)}static fromJson(e,t){return(new He).fromJson(e,t)}static fromJsonString(e,t){return(new He).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(He,e,t)}}var We,Ze,Ke;He.runtime=Se,He.typeName="google.protobuf.Timestamp",He.fields=Se.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.COLLECTION=1]="COLLECTION",e[e.TEXT=2]="TEXT",e[e.HTML=3]="HTML",e[e.RSS=4]="RSS",e[e.AUDIO=5]="AUDIO",e[e.PODCAST=6]="PODCAST",e[e.SITEMAP=7]="SITEMAP",e[e.PDF=8]="PDF",e[e.EPUB=9]="EPUB",e[e.YOUTUBE=10]="YOUTUBE"}(We||(We={})),Se.util.setEnumType(We,"operand.v1.ObjectType",[{no:0,name:"OBJECT_TYPE_UNSPECIFIED"},{no:1,name:"OBJECT_TYPE_COLLECTION"},{no:2,name:"OBJECT_TYPE_TEXT"},{no:3,name:"OBJECT_TYPE_HTML"},{no:4,name:"OBJECT_TYPE_RSS"},{no:5,name:"OBJECT_TYPE_AUDIO"},{no:6,name:"OBJECT_TYPE_PODCAST"},{no:7,name:"OBJECT_TYPE_SITEMAP"},{no:8,name:"OBJECT_TYPE_PDF"},{no:9,name:"OBJECT_TYPE_EPUB"},{no:10,name:"OBJECT_TYPE_YOUTUBE"}]),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.MP3=1]="MP3",e[e.OGG=2]="OGG",e[e.FLAC=3]="FLAC",e[e.WAV=4]="WAV",e[e.MP4=5]="MP4"}(Ze||(Ze={})),Se.util.setEnumType(Ze,"operand.v1.AudioFileExt",[{no:0,name:"AUDIO_FILE_EXT_UNSPECIFIED"},{no:1,name:"AUDIO_FILE_EXT_MP3"},{no:2,name:"AUDIO_FILE_EXT_OGG"},{no:3,name:"AUDIO_FILE_EXT_FLAC"},{no:4,name:"AUDIO_FILE_EXT_WAV"},{no:5,name:"AUDIO_FILE_EXT_MP4"}]),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.QUEUED=1]="QUEUED",e[e.INDEXING=2]="INDEXING",e[e.READY=3]="READY",e[e.ERROR=4]="ERROR"}(Ke||(Ke={})),Se.util.setEnumType(Ke,"operand.v1.ObjectStatus",[{no:0,name:"OBJECT_STATUS_UNSPECIFIED"},{no:1,name:"OBJECT_STATUS_QUEUED"},{no:2,name:"OBJECT_STATUS_INDEXING"},{no:3,name:"OBJECT_STATUS_READY"},{no:4,name:"OBJECT_STATUS_ERROR"}]);class ze extends O{constructor(e){super(),this.value={case:void 0},Se.util.initPartial(e,this)}static fromBinary(e,t){return(new ze).fromBinary(e,t)}static fromJson(e,t){return(new ze).fromJson(e,t)}static fromJsonString(e,t){return(new ze).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(ze,e,t)}}ze.runtime=Se,ze.typeName="operand.v1.ObjectMetadata",ze.fields=Se.util.newFieldList((()=>[{no:1,name:"collection",kind:"message",T:Qe,oneof:"value"},{no:2,name:"text",kind:"message",T:et,oneof:"value"},{no:3,name:"html",kind:"message",T:tt,oneof:"value"},{no:4,name:"rss",kind:"message",T:nt,oneof:"value"},{no:5,name:"audio",kind:"message",T:rt,oneof:"value"},{no:6,name:"podcast",kind:"message",T:st,oneof:"value"},{no:7,name:"sitemap",kind:"message",T:it,oneof:"value"},{no:8,name:"pdf",kind:"message",T:ot,oneof:"value"},{no:9,name:"epub",kind:"message",T:at,oneof:"value"},{no:10,name:"youtube",kind:"message",T:ut,oneof:"value"}]));class Qe extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Qe).fromBinary(e,t)}static fromJson(e,t){return(new Qe).fromJson(e,t)}static fromJsonString(e,t){return(new Qe).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Qe,e,t)}}Qe.runtime=Se,Qe.typeName="operand.v1.CollectionMetadata",Qe.fields=Se.util.newFieldList((()=>[]));class et extends O{constructor(e){super(),this.text="",Se.util.initPartial(e,this)}static fromBinary(e,t){return(new et).fromBinary(e,t)}static fromJson(e,t){return(new et).fromJson(e,t)}static fromJsonString(e,t){return(new et).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(et,e,t)}}et.runtime=Se,et.typeName="operand.v1.TextMetadata",et.fields=Se.util.newFieldList((()=>[{no:1,name:"text",kind:"scalar",T:9}]));class tt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new tt).fromBinary(e,t)}static fromJson(e,t){return(new tt).fromJson(e,t)}static fromJsonString(e,t){return(new tt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(tt,e,t)}}tt.runtime=Se,tt.typeName="operand.v1.HTMLMetadata",tt.fields=Se.util.newFieldList((()=>[{no:1,name:"html",kind:"scalar",T:9,opt:!0}]));class nt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new nt).fromBinary(e,t)}static fromJson(e,t){return(new nt).fromJson(e,t)}static fromJsonString(e,t){return(new nt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(nt,e,t)}}nt.runtime=Se,nt.typeName="operand.v1.RSSMetadata",nt.fields=Se.util.newFieldList((()=>[]));class rt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new rt).fromBinary(e,t)}static fromJson(e,t){return(new rt).fromJson(e,t)}static fromJsonString(e,t){return(new rt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(rt,e,t)}}rt.runtime=Se,rt.typeName="operand.v1.AudioMetadata",rt.fields=Se.util.newFieldList((()=>[{no:1,name:"file_ext",kind:"enum",T:Se.getEnumType(Ze),opt:!0},{no:2,name:"audio",kind:"scalar",T:12,opt:!0}]));class st extends O{constructor(e){super(),this.listennotesId="",Se.util.initPartial(e,this)}static fromBinary(e,t){return(new st).fromBinary(e,t)}static fromJson(e,t){return(new st).fromJson(e,t)}static fromJsonString(e,t){return(new st).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(st,e,t)}}st.runtime=Se,st.typeName="operand.v1.PodcastMetadata",st.fields=Se.util.newFieldList((()=>[{no:1,name:"listennotes_id",kind:"scalar",T:9}]));class it extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new it).fromBinary(e,t)}static fromJson(e,t){return(new it).fromJson(e,t)}static fromJsonString(e,t){return(new it).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(it,e,t)}}it.runtime=Se,it.typeName="operand.v1.SitemapMetadata",it.fields=Se.util.newFieldList((()=>[{no:1,name:"url_regex",kind:"scalar",T:9,opt:!0}]));class ot extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new ot).fromBinary(e,t)}static fromJson(e,t){return(new ot).fromJson(e,t)}static fromJsonString(e,t){return(new ot).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(ot,e,t)}}ot.runtime=Se,ot.typeName="operand.v1.PDFMetadata",ot.fields=Se.util.newFieldList((()=>[{no:1,name:"pdf",kind:"scalar",T:12,opt:!0}]));class at extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new at).fromBinary(e,t)}static fromJson(e,t){return(new at).fromJson(e,t)}static fromJsonString(e,t){return(new at).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(at,e,t)}}at.runtime=Se,at.typeName="operand.v1.EPUBMetadata",at.fields=Se.util.newFieldList((()=>[{no:1,name:"epub",kind:"scalar",T:12,opt:!0}]));class ut extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new ut).fromBinary(e,t)}static fromJson(e,t){return(new ut).fromJson(e,t)}static fromJsonString(e,t){return(new ut).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(ut,e,t)}}ut.runtime=Se,ut.typeName="operand.v1.YouTubeMetadata",ut.fields=Se.util.newFieldList((()=>[]));class ct extends O{constructor(e){super(),this.properties={},Se.util.initPartial(e,this)}static fromBinary(e,t){return(new ct).fromBinary(e,t)}static fromJson(e,t){return(new ct).fromJson(e,t)}static fromJsonString(e,t){return(new ct).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(ct,e,t)}}ct.runtime=Se,ct.typeName="operand.v1.Properties",ct.fields=Se.util.newFieldList((()=>[{no:1,name:"properties",kind:"map",K:9,V:{kind:"message",T:lt}}]));class lt extends O{constructor(e){super(),this.indexed=!1,this.value={case:void 0},Se.util.initPartial(e,this)}static fromBinary(e,t){return(new lt).fromBinary(e,t)}static fromJson(e,t){return(new lt).fromJson(e,t)}static fromJsonString(e,t){return(new lt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(lt,e,t)}}lt.runtime=Se,lt.typeName="operand.v1.Property",lt.fields=Se.util.newFieldList((()=>[{no:1,name:"indexed",kind:"scalar",T:8},{no:2,name:"text",kind:"scalar",T:9,oneof:"value"},{no:3,name:"number",kind:"scalar",T:1,oneof:"value"},{no:4,name:"text_array",kind:"message",T:ft,oneof:"value"},{no:5,name:"number_array",kind:"message",T:dt,oneof:"value"}]));class ft extends O{constructor(e){super(),this.values=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new ft).fromBinary(e,t)}static fromJson(e,t){return(new ft).fromJson(e,t)}static fromJsonString(e,t){return(new ft).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(ft,e,t)}}ft.runtime=Se,ft.typeName="operand.v1.TextArray",ft.fields=Se.util.newFieldList((()=>[{no:1,name:"values",kind:"scalar",T:9,repeated:!0}]));class dt extends O{constructor(e){super(),this.values=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new dt).fromBinary(e,t)}static fromJson(e,t){return(new dt).fromJson(e,t)}static fromJsonString(e,t){return(new dt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(dt,e,t)}}dt.runtime=Se,dt.typeName="operand.v1.NumberArray",dt.fields=Se.util.newFieldList((()=>[{no:1,name:"values",kind:"scalar",T:1,repeated:!0}]));class mt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new mt).fromBinary(e,t)}static fromJson(e,t){return(new mt).fromJson(e,t)}static fromJsonString(e,t){return(new mt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(mt,e,t)}}mt.runtime=Se,mt.typeName="operand.v1.ObjectPreview",mt.fields=Se.util.newFieldList((()=>[{no:1,name:"title",kind:"scalar",T:9,opt:!0},{no:2,name:"description",kind:"scalar",T:9,opt:!0},{no:3,name:"image",kind:"scalar",T:9,opt:!0},{no:4,name:"url",kind:"scalar",T:9,opt:!0}]));class ht extends O{constructor(e){super(),this.id="",this.type=We.UNSPECIFIED,this.status=Ke.UNSPECIFIED,Se.util.initPartial(e,this)}static fromBinary(e,t){return(new ht).fromBinary(e,t)}static fromJson(e,t){return(new ht).fromJson(e,t)}static fromJsonString(e,t){return(new ht).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(ht,e,t)}}ht.runtime=Se,ht.typeName="operand.v1.Object",ht.fields=Se.util.newFieldList((()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"created_at",kind:"message",T:He},{no:3,name:"updated_at",kind:"message",T:He,opt:!0},{no:4,name:"parent_id",kind:"scalar",T:9,opt:!0},{no:5,name:"type",kind:"enum",T:Se.getEnumType(We)},{no:6,name:"metadata",kind:"message",T:ze,opt:!0},{no:7,name:"properties",kind:"message",T:ct},{no:8,name:"status",kind:"enum",T:Se.getEnumType(Ke)},{no:9,name:"preview",kind:"message",T:mt,opt:!0}]));class pt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new pt).fromBinary(e,t)}static fromJson(e,t){return(new pt).fromJson(e,t)}static fromJsonString(e,t){return(new pt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(pt,e,t)}}pt.runtime=Se,pt.typeName="operand.v1.ObjectOptions",pt.fields=Se.util.newFieldList((()=>[{no:1,name:"include_metadata",kind:"scalar",T:8,opt:!0},{no:2,name:"include_preview",kind:"scalar",T:8,opt:!0}]));class yt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new yt).fromBinary(e,t)}static fromJson(e,t){return(new yt).fromJson(e,t)}static fromJsonString(e,t){return(new yt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(yt,e,t)}}yt.runtime=Se,yt.typeName="operand.v1.UpsertRequest",yt.fields=Se.util.newFieldList((()=>[{no:1,name:"existing_id",kind:"scalar",T:9,opt:!0},{no:2,name:"parent_id",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"enum",T:Se.getEnumType(We),opt:!0},{no:4,name:"metadata",kind:"message",T:ze,opt:!0},{no:5,name:"properties",kind:"message",T:ct,opt:!0},{no:6,name:"unique_property",kind:"scalar",T:9,opt:!0}]));class gt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new gt).fromBinary(e,t)}static fromJson(e,t){return(new gt).fromJson(e,t)}static fromJsonString(e,t){return(new gt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(gt,e,t)}}gt.runtime=Se,gt.typeName="operand.v1.UpsertResponse",gt.fields=Se.util.newFieldList((()=>[{no:1,name:"object",kind:"message",T:ht}]));class wt extends O{constructor(e){super(),this.query="",this.type=We.UNSPECIFIED,Se.util.initPartial(e,this)}static fromBinary(e,t){return(new wt).fromBinary(e,t)}static fromJson(e,t){return(new wt).fromJson(e,t)}static fromJsonString(e,t){return(new wt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(wt,e,t)}}wt.runtime=Se,wt.typeName="operand.v1.SuggestionsRequest",wt.fields=Se.util.newFieldList((()=>[{no:1,name:"query",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:Se.getEnumType(We)}]));class bt extends O{constructor(e){super(),this.upserts=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new bt).fromBinary(e,t)}static fromJson(e,t){return(new bt).fromJson(e,t)}static fromJsonString(e,t){return(new bt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(bt,e,t)}}bt.runtime=Se,bt.typeName="operand.v1.SuggestionsResponse",bt.fields=Se.util.newFieldList((()=>[{no:1,name:"upserts",kind:"message",T:Tt,repeated:!0}]));class Tt extends O{constructor(e){super(),this.description="",Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Tt).fromBinary(e,t)}static fromJson(e,t){return(new Tt).fromJson(e,t)}static fromJsonString(e,t){return(new Tt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Tt,e,t)}}Tt.runtime=Se,Tt.typeName="operand.v1.SuggestionsResponse.AnnotatedUpsert",Tt.fields=Se.util.newFieldList((()=>[{no:1,name:"upsert",kind:"message",T:yt},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"page_estimate",kind:"scalar",T:5,opt:!0}]));class vt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new vt).fromBinary(e,t)}static fromJson(e,t){return(new vt).fromJson(e,t)}static fromJsonString(e,t){return(new vt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(vt,e,t)}}vt.runtime=Se,vt.typeName="operand.v1.ListRequest",vt.fields=Se.util.newFieldList((()=>[{no:1,name:"parent_id",kind:"scalar",T:9,opt:!0},{no:2,name:"cursor",kind:"scalar",T:9,opt:!0},{no:3,name:"limit",kind:"scalar",T:5,opt:!0},{no:4,name:"options",kind:"message",T:pt,opt:!0}]));class kt extends O{constructor(e){super(),this.objects=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new kt).fromBinary(e,t)}static fromJson(e,t){return(new kt).fromJson(e,t)}static fromJsonString(e,t){return(new kt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(kt,e,t)}}kt.runtime=Se,kt.typeName="operand.v1.ListResponse",kt.fields=Se.util.newFieldList((()=>[{no:1,name:"objects",kind:"message",T:ht,repeated:!0},{no:2,name:"next_cursor",kind:"scalar",T:9,opt:!0}]));class Et extends O{constructor(e){super(),this.ids=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Et).fromBinary(e,t)}static fromJson(e,t){return(new Et).fromJson(e,t)}static fromJsonString(e,t){return(new Et).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Et,e,t)}}Et.runtime=Se,Et.typeName="operand.v1.GetRequest",Et.fields=Se.util.newFieldList((()=>[{no:1,name:"ids",kind:"scalar",T:9,repeated:!0},{no:2,name:"options",kind:"message",T:pt,opt:!0}]));class St extends O{constructor(e){super(),this.objects=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new St).fromBinary(e,t)}static fromJson(e,t){return(new St).fromJson(e,t)}static fromJsonString(e,t){return(new St).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(St,e,t)}}St.runtime=Se,St.typeName="operand.v1.GetResponse",St.fields=Se.util.newFieldList((()=>[{no:1,name:"objects",kind:"message",T:ht,repeated:!0}]));class Nt extends O{constructor(e){super(),this.ids=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Nt).fromBinary(e,t)}static fromJson(e,t){return(new Nt).fromJson(e,t)}static fromJsonString(e,t){return(new Nt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Nt,e,t)}}Nt.runtime=Se,Nt.typeName="operand.v1.DeleteRequest",Nt.fields=Se.util.newFieldList((()=>[{no:1,name:"ids",kind:"scalar",T:9,repeated:!0}]));class It extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new It).fromBinary(e,t)}static fromJson(e,t){return(new It).fromJson(e,t)}static fromJsonString(e,t){return(new It).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(It,e,t)}}It.runtime=Se,It.typeName="operand.v1.DeleteResponse",It.fields=Se.util.newFieldList((()=>[]));class Jt extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Jt).fromBinary(e,t)}static fromJson(e,t){return(new Jt).fromJson(e,t)}static fromJsonString(e,t){return(new Jt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Jt,e,t)}}Jt.runtime=Se,Jt.typeName="operand.v1.CountRequest",Jt.fields=Se.util.newFieldList((()=>[{no:1,name:"parent_id",kind:"scalar",T:9,opt:!0}]));class Ot extends O{constructor(e){super(),this.count=0,Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Ot).fromBinary(e,t)}static fromJson(e,t){return(new Ot).fromJson(e,t)}static fromJsonString(e,t){return(new Ot).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Ot,e,t)}}Ot.runtime=Se,Ot.typeName="operand.v1.CountResponse",Ot.fields=Se.util.newFieldList((()=>[{no:1,name:"count",kind:"scalar",T:5}]));class Bt extends O{constructor(e){super(),this.conditions=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Bt).fromBinary(e,t)}static fromJson(e,t){return(new Bt).fromJson(e,t)}static fromJsonString(e,t){return(new Bt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Bt,e,t)}}Bt.runtime=Se,Bt.typeName="operand.v1.Filter",Bt.fields=Se.util.newFieldList((()=>[{no:1,name:"conditions",kind:"message",T:Ut,repeated:!0}]));class Ft extends O{constructor(e){super(),Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Ft).fromBinary(e,t)}static fromJson(e,t){return(new Ft).fromJson(e,t)}static fromJsonString(e,t){return(new Ft).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Ft,e,t)}}Ft.runtime=Se,Ft.typeName="operand.v1.NotCondition",Ft.fields=Se.util.newFieldList((()=>[{no:1,name:"condition",kind:"message",T:Ut}]));class Ut extends O{constructor(e){super(),this.condition={case:void 0},Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Ut).fromBinary(e,t)}static fromJson(e,t){return(new Ut).fromJson(e,t)}static fromJsonString(e,t){return(new Ut).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Ut,e,t)}}Ut.runtime=Se,Ut.typeName="operand.v1.Condition",Ut.fields=Se.util.newFieldList((()=>[{no:1,name:"property",kind:"message",T:xt,oneof:"condition"},{no:2,name:"range",kind:"message",T:At,oneof:"condition"},{no:3,name:"and",kind:"message",T:Bt,oneof:"condition"},{no:4,name:"or",kind:"message",T:Bt,oneof:"condition"},{no:5,name:"not",kind:"message",T:Ft,oneof:"condition"}]));class xt extends O{constructor(e){super(),this.key="",Se.util.initPartial(e,this)}static fromBinary(e,t){return(new xt).fromBinary(e,t)}static fromJson(e,t){return(new xt).fromJson(e,t)}static fromJsonString(e,t){return(new xt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(xt,e,t)}}xt.runtime=Se,xt.typeName="operand.v1.KeyedProperty",xt.fields=Se.util.newFieldList((()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"property",kind:"message",T:lt}]));class At extends O{constructor(e){super(),this.key="",Se.util.initPartial(e,this)}static fromBinary(e,t){return(new At).fromBinary(e,t)}static fromJson(e,t){return(new At).fromJson(e,t)}static fromJsonString(e,t){return(new At).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(At,e,t)}}At.runtime=Se,At.typeName="operand.v1.Range",At.fields=Se.util.newFieldList((()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"lt",kind:"scalar",T:1,opt:!0},{no:3,name:"lte",kind:"scalar",T:1,opt:!0},{no:4,name:"gt",kind:"scalar",T:1,opt:!0},{no:5,name:"gte",kind:"scalar",T:1,opt:!0}]));class Dt extends O{constructor(e){super(),this.query="",Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Dt).fromBinary(e,t)}static fromJson(e,t){return(new Dt).fromJson(e,t)}static fromJsonString(e,t){return(new Dt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Dt,e,t)}}Dt.runtime=Se,Dt.typeName="operand.v1.SearchWithinRequest",Dt.fields=Se.util.newFieldList((()=>[{no:1,name:"query",kind:"scalar",T:9},{no:2,name:"limit",kind:"scalar",T:5,opt:!0},{no:3,name:"filter",kind:"message",T:Bt,opt:!0},{no:4,name:"object_options",kind:"message",T:pt,opt:!0}]));class Pt extends O{constructor(e){super(),this.matches=[],this.objects={},Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Pt).fromBinary(e,t)}static fromJson(e,t){return(new Pt).fromJson(e,t)}static fromJsonString(e,t){return(new Pt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Pt,e,t)}}Pt.runtime=Se,Pt.typeName="operand.v1.SearchWithinResponse",Pt.fields=Se.util.newFieldList((()=>[{no:1,name:"matches",kind:"message",T:Lt,repeated:!0},{no:2,name:"objects",kind:"map",K:9,V:{kind:"message",T:ht}}]));class Lt extends O{constructor(e){super(),this.matchId=R.zero,this.objectId="",this.content="",this.score=0,Se.util.initPartial(e,this)}static fromBinary(e,t){return(new Lt).fromBinary(e,t)}static fromJson(e,t){return(new Lt).fromJson(e,t)}static fromJsonString(e,t){return(new Lt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(Lt,e,t)}}Lt.runtime=Se,Lt.typeName="operand.v1.SearchWithinResponse.Match",Lt.fields=Se.util.newFieldList((()=>[{no:1,name:"match_id",kind:"scalar",T:3},{no:2,name:"object_id",kind:"scalar",T:9},{no:3,name:"content",kind:"scalar",T:9},{no:4,name:"score",kind:"scalar",T:2},{no:5,name:"extra",kind:"message",T:ct,opt:!0}]));class jt extends O{constructor(e){super(),this.answer="",this.confidence=0,Se.util.initPartial(e,this)}static fromBinary(e,t){return(new jt).fromBinary(e,t)}static fromJson(e,t){return(new jt).fromJson(e,t)}static fromJsonString(e,t){return(new jt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(jt,e,t)}}jt.runtime=Se,jt.typeName="operand.v1.Answer",jt.fields=Se.util.newFieldList((()=>[{no:1,name:"answer",kind:"scalar",T:9},{no:2,name:"confidence",kind:"scalar",T:2}]));class _t extends O{constructor(e){super(),this.query="",Se.util.initPartial(e,this)}static fromBinary(e,t){return(new _t).fromBinary(e,t)}static fromJson(e,t){return(new _t).fromJson(e,t)}static fromJsonString(e,t){return(new _t).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(_t,e,t)}}_t.runtime=Se,_t.typeName="operand.v1.AnswerRequest",_t.fields=Se.util.newFieldList((()=>[{no:1,name:"query",kind:"scalar",T:9},{no:2,name:"filter",kind:"message",T:Bt,opt:!0},{no:3,name:"object_options",kind:"message",T:pt,opt:!0}]));class qt extends O{constructor(e){super(),this.sources=[],Se.util.initPartial(e,this)}static fromBinary(e,t){return(new qt).fromBinary(e,t)}static fromJson(e,t){return(new qt).fromJson(e,t)}static fromJsonString(e,t){return(new qt).fromJsonString(e,t)}static equals(e,t){return Se.util.equals(qt,e,t)}}qt.runtime=Se,qt.typeName="operand.v1.AnswerResponse",qt.fields=Se.util.newFieldList((()=>[{no:1,name:"answer",kind:"message",T:jt,opt:!0},{no:2,name:"sources",kind:"message",T:ht,repeated:!0}]));const Rt={typeName:"operand.v1.ObjectService",methods:{upsert:{name:"Upsert",I:yt,O:gt,kind:e.Unary},suggestions:{name:"Suggestions",I:wt,O:bt,kind:e.Unary},list:{name:"List",I:vt,O:kt,kind:e.Unary},get:{name:"Get",I:Et,O:St,kind:e.Unary},delete:{name:"Delete",I:Nt,O:It,kind:e.Unary},count:{name:"Count",I:Jt,O:Ot,kind:e.Unary},searchWithin:{name:"SearchWithin",I:Dt,O:Pt,kind:e.Unary},answer:{name:"Answer",I:_t,O:qt,kind:e.Unary}}};var $t=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},Ct=function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};chrome.runtime.onInstalled.addListener((function(){return $t(void 0,void 0,void 0,(function(){var e;return Ct(this,(function(t){switch(t.label){case 0:return console.log("Installed!"),[4,l({apiKey:"",searchInjectionEnabled:!0,automaticIndexingDestination:"",automaticIndexingEnabled:!1,newTabFeedEnabled:!0,manualIndexingMostRecentDestination:""})];case 1:return t.sent(),[4,c()];case 2:return(e=t.sent())&&""!==e||chrome.runtime.openOptionsPage(),[2]}}))}))})),chrome.omnibox.onInputEntered.addListener((function(e){if(e){var t="http://beta.operand.ai/feed?q="+e;chrome.tabs.create({url:t})}}));var Mt=["chrome://","chrome-extension://","about:","http://localhost","https://www.google.com/search","https://beta.operand.ai/"];chrome.tabs.onUpdated.addListener((function(e,t,n){return $t(this,void 0,void 0,(function(){var r,s,i,o,c;return Ct(this,(function(l){switch(l.label){case 0:return"chrome://newtab/"!==n.url?[3,2]:[4,u("newTabFeedEnabled")];case 1:return!0!==l.sent()&&chrome.tabs.update(e,{url:"chrome-search://local-ntp/local-ntp.html"}),[3,5];case 2:return"complete"!==t.status?[3,5]:Mt.some((function(e){var t;return null===(t=n.url)||void 0===t?void 0:t.startsWith(e)}))?[2]:(r=!1,[4,f().then((function(e){if(e){console.log("Rules",e);for(var t=0,s=e;t<s.length;t++){var i=s[t],o=new URL(n.url);o.host!==i.domain&&o.hostname!==i.domain&&o.origin!==i.domain||(r=!0)}}}))]);case 3:return l.sent(),r?[2]:[4,a()];case 4:if(!(s=l.sent()))return[2];if(!s.apiKey||!s.automaticIndexingEnabled)return[2];if(i=Ge(Rt,s.apiKey,"https://api.operand.ai"),!n.url)return[2];o=new URL(n.url),c="".concat(o.protocol,"//").concat(o.host).concat(o.pathname),i.upsert({type:We.HTML,metadata:{value:{case:"html",value:{html:void 0}}},properties:{properties:{_url:{indexed:!1,value:{case:"text",value:c}}}},uniqueProperty:"_url"},{headers:{"Operand-Index-Id":s.automaticIndexingDestination}}),l.label=5;case 5:return[2]}}))}))}))})()})();
//# sourceMappingURL=background.bundle.js.map