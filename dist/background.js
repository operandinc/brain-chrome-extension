chrome.runtime.onInstalled.addListener((async()=>{console.log("Installed!"),chrome.storage.sync.get("integrationToken",(async o=>{o.integrationToken||chrome.runtime.openOptionsPage()}))})),chrome.tabs.onUpdated.addListener((async(o,e,n)=>{"complete"==e.status&&(n.url.startsWith("chrome://")||chrome.storage.sync.get("mode",(async o=>{"auto"==o.mode&&(console.log("Mode is auto"),chrome.storage.sync.get("integrationToken",(async o=>{if(o.integrationToken){const e=o.integrationToken,t=n.url;console.log("Token is set"),console.log("Indexing "+t);try{const o=await fetch("https://brain.operand.ai/api/index",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify({url:t})}),n=await o.json();return console.log(n),!0}catch(o){return console.log(o),!1}}})))})))}));